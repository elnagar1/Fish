// ============================================
// Database Initialization Script
// ============================================

const sqlite3 = require('sqlite3').verbose();
const path = require('path');

const dbPath = path.join(__dirname, 'database.sqlite');
const db = new sqlite3.Database(dbPath);

console.log('๐ง Initializing database...');

db.serialize(() => {
    // Articles Table
    db.run(`
        CREATE TABLE IF NOT EXISTS articles (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            title TEXT NOT NULL,
            category TEXT NOT NULL,
            icon TEXT,
            date TEXT NOT NULL,
            summary TEXT NOT NULL,
            content TEXT NOT NULL,
            image_url TEXT,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    `, (err) => {
        if (err) console.error('Error creating articles table:', err);
        else console.log('โ Articles table created');
    });

    // Site Content Table
    db.run(`
        CREATE TABLE IF NOT EXISTS site_content (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            key TEXT UNIQUE NOT NULL,
            value TEXT NOT NULL,
            updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    `, (err) => {
        if (err) console.error('Error creating site_content table:', err);
        else console.log('โ Site content table created');
    });

    // Questions Table
    db.run(`
        CREATE TABLE IF NOT EXISTS questions (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            question_number INTEGER NOT NULL,
            question_text TEXT NOT NULL,
            question_type TEXT NOT NULL,
            active BOOLEAN DEFAULT 1,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    `, (err) => {
        if (err) console.error('Error creating questions table:', err);
        else console.log('โ Questions table created');
    });

    // Question Options Table
    db.run(`
        CREATE TABLE IF NOT EXISTS question_options (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            question_id INTEGER NOT NULL,
            option_value TEXT NOT NULL,
            option_label TEXT NOT NULL,
            option_icon TEXT,
            FOREIGN KEY (question_id) REFERENCES questions(id)
        )
    `, (err) => {
        if (err) console.error('Error creating question_options table:', err);
        else console.log('โ Question options table created');
    });

    // Consultations Log Table
    db.run(`
        CREATE TABLE IF NOT EXISTS consultations (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            answers TEXT NOT NULL,
            ai_response TEXT,
            provider TEXT,
            created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
    `, (err) => {
        if (err) console.error('Error creating consultations table:', err);
        else console.log('โ Consultations table created');
    });

    // Insert default site content
    const defaultContent = [
        ['site_title', 'ูุณุชุดุงุฑ ูุฒุงุฑุน ุงูุฃุณูุงู'],
        ['hero_title', 'ุงุณุชุดุงุฑุงุช ุฐููุฉ ููุฒุฑุนุชู ุงูุณูููุฉ'],
        ['hero_description', 'ุงุญุตู ุนูู ูุตุงุฆุญ ูุชูุฌููุงุช ูุชุฎุตุตุฉ ูู ุฎุจูุฑ ุงูุชุฑุงุถู ูุฏุนูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู.'],
        ['cta_button_text', 'ุงุจุฏุฃ ุงูุงุณุชุดุงุฑุฉ ุงูุขู']
    ];

    const insertContent = db.prepare('INSERT OR IGNORE INTO site_content (key, value) VALUES (?, ?)');
    defaultContent.forEach(([key, value]) => {
        insertContent.run(key, value);
    });
    insertContent.finalize();
    console.log('โ Default site content inserted');

    // Insert all 20 articles from articles_data.js
    const allArticles = [
        { title: 'ุฏููู ุงุณุชุฒุฑุงุน ุงูุจูุทู ุงููููู ูู ูุตุฑ', category: 'ุทุฑู ุงูุงุณุชุฒุฑุงุน', icon: '๐', date: '2024-01-15', summary: 'ุชุนุฑู ุนูู ุฃูุถู ุงูููุงุฑุณุงุช ูุชุฑุจูุฉ ุงูุจูุทู ูู ุงูุฃุฌูุงุก ุงููุตุฑูุฉ ูุชุญููู ุฃุนูู ุฅูุชุงุฌูุฉ.', content: '<h3>ููุฏูุฉ</h3><p>ุงูุจูุทู ุงููููู ูู ุนุตุจ ุงูุงุณุชุฒุฑุงุน ุงูุณููู ูู ูุตุฑ. ูุฌุงุญ ุงูุฏูุฑุฉ ูุนุชูุฏ ุนูู ุงูุชุฌููุฒ ุงูุฌูุฏ ูุงุฎุชูุงุฑ ุงูุฒุฑูุนุฉ ุงูููุงุณุจุฉ.</p><h3>ุชุฌููุฒ ุงูุฃุญูุงุถ</h3><p>ุงุจุฏุฃ ุจุชุฌููู ุงูุญูุถ ูู ุงูุดุชุงุก ูุงูุซุฑ ุงูุฌูุฑ ุงูุญู ูุชุทููุฑ ุงูุชุฑุจุฉ ูุถุจุท ุงูุญููุถุฉ.</p><h3>ุงุฎุชูุงุฑ ุงูุฒุฑูุนุฉ</h3><p>ุงุดุชุฑู ุฒุฑูุนุฉ ูุญูุฏุฉ ุงูุฌูุณ (ุฐููุฑ ููุท) ูู ููุฑุฎุงุช ููุซููุฉ ูู ููุฑ ุงูุดูุฎ ุฃู ุงูุดุฑููุฉ.</p><h3>ุงูุชุบุฐูุฉ</h3><p>ุงุณุชุฎุฏู ุฃุนูุงู ุทุงููุฉ 25-30% ุจุฑูุชูู. ุบุฐูู ุตุจุงุญุงู ููุจู ุงูุบุฑูุจ ูุชุฌูุจ ููุช ุงูุธููุฑุฉ ุงูุญุงุฑ.</p>' },
        { title: 'ุงูุชุนุงูู ูุน ุงูุณุฏุฉ ุงูุดุชููุฉ ูุงูุฎูุงุถ ุงูุญุฑุงุฑุฉ', category: 'ุชูุจููุงุช ููุณููุฉ', icon: 'โ๏ธ', date: '2024-02-01', summary: 'ููู ุชุญูู ุฃุณูุงูู ูู ุงูุจุฑุฏ ุงููุงุฑุต ูู ููุงูุฑ ููุจุฑุงูุฑ ูุชุชุฌูุจ ุงููููู ุงูุฌูุงุนูุ', content: '<h3>ุฎุทุฑ ุงูุจุฑูุฏุฉ</h3><p>ุนูุฏูุง ุชูุฎูุถ ุงูุญุฑุงุฑุฉ ุนู 10 ุฏุฑุฌุงุชุ ูุชููู ุงูุจูุทู ุนู ุงูุฃูู ูุชุถุนู ููุงุนุชู.</p><h3>ุฅุฌุฑุงุกุงุช ุงูุญูุงูุฉ</h3><ul><li>ุฑูุน ุนูู ุงูููุงู ูู 1.5-2 ูุชุฑ</li><li>ุฅููุงู ุงูุชุบุฐูุฉ ุชุญุช 15 ุฏุฑุฌุฉ</li><li>ุชุดุบูู ุงูุจุฏุงูุงุช ุจุญุฐุฑ ูู ุงูุฃููุงุช ุงููุดูุณุฉ</li><li>ุชุบุทูุฉ ุงูุฃุญูุงุถ ุจุงูุจูุงุณุชูู ูู ุงูููุฑุฎุงุช</li></ul>' },
        { title: 'ุฌูุฏุฉ ุงูููุงู: ุงููุดุงูู ูุงูุญููู', category: 'ุฌูุฏุฉ ุงูููุงู', icon: '๐ง', date: '2024-03-10', summary: 'ุชุญุฏูุงุช ููุงู ุงูุตุฑู ุงูุฒุฑุงุนู ูููููุฉ ูุนุงูุฌุฉ ุงุฑุชูุงุน ุงูุฃููููุง ูููุต ุงูุฃูุณุฌูู.', content: '<h3>ุงูุฃููููุง ุงููุงุชู ุงูุตุงูุช</h3><p>ุงุฑุชูุงุน ุงูุฃููููุง ูุธูุฑ ุนูุฏูุง ุชุชุฌูุน ุงูุฃุณูุงู ุนูุฏ ุงูุณุทุญ ุฃู ุชุชุญุฑู ุจุจุทุก.</p><h3>ุงูุญููู</h3><ul><li>ุชุบููุฑ ุงูููุงู ุจุงูุชุธุงู</li><li>ุชุดุบูู ุงูุจุฏุงูุงุช ูููุงู ุฎุงุตุฉ ูู 2 ูุฌุฑุงู ููุดุฑูู</li><li>ููุงุณ pH ูุงูุฃูุณุฌูู ูุงูุฃููููุง ุฏูุฑูุงู</li></ul>' },
        { title: 'ุงูุงุณุชุฒุฑุงุน ุงูุชูุงููู: ุงูุณูู ูุงููุญุงุตูู ูุนุงู', category: 'ุฃููุงุฑ ุงูุชุตุงุฏูุฉ', icon: '๐พ', date: '2024-04-05', summary: 'ููู ุชุณุชููุฏ ูู ููุงู ุฃุญูุงุถ ุงูุณูู ูู ุฑู ุงููุญุงุตูู ูุชุนุธูู ุงูุฑุจุญ.', content: '<h3>ุงูููุฑุฉ</h3><p>ุงุณุชุฎุฏุงู ููุงู ุงูุฃุญูุงุถ ุงูุบููุฉ ุจุงูููุชุฑูุฌูู ูู ุฑู ุงูููุญ ุฃู ุงูุจุฑุณูู ุฃู ุงูุฎุถุฑูุงุช.</p><h3>ุงูููุงุฆุฏ</h3><ul><li>ุชูููุฑ ุงูุณูุงุฏ ุงููููุงูู</li><li>ุชุฑุดูุฏ ุงูููุงู</li><li>ุชูููุน ูุตุงุฏุฑ ุงูุฏุฎู</li></ul>' },
        { title: 'ุฃูุฑุงุถ ุงูุฃุณูุงู ุงูุดุงุฆุนุฉ ูู ุงูุตูู', category: 'ุตุญุฉ ุงูุฃุณูุงู', icon: '๐ฉบ', date: '2024-05-20', summary: 'ูุน ุงุฑุชูุงุน ุงูุญุฑุงุฑุฉ ุชูุดุท ุงูุจูุชูุฑูุง. ุฏูููู ููููุงูุฉ ูู ุงูุณุชุฑุจุชููููุณ ูุนูู ุงูุฎูุงุดูู.', content: '<h3>ุฃูุฑุงุถ ุงูุตูู</h3><p>ุงูุญุฑุงุฑุฉ ููู 30 ุฏุฑุฌุฉ ุชุณุจุจ ุฅุฌูุงุฏุงู ูุชูุดุท ุงูุณุชุฑุจุชููููุณ ุงูุฐู ูุณุจุจ ุฌุญูุธ ุงูุนูู.</p><h3>ุงูููุงูุฉ</h3><ul><li>ุฎูุถ ูุซุงูุฉ ุงูุชุฎุฒูู</li><li>ุฅุถุงูุฉ ููุชุงููู C ููุนูู</li><li>ุฅุฒุงูุฉ ุงูุฃุณูุงู ุงููุงููุฉ ููุฑุงู</li></ul>' },
        { title: 'ุงูุฃููุงุต ุงูุนุงุฆูุฉ ูุงูุงุณุชุฒุฑุงุน ุงูููุซู', category: 'ุทุฑู ุญุฏูุซุฉ', icon: '๐', date: '2024-06-15', summary: 'ูู ุชุตูุญ ุงูุฃููุงุต ูู ุงููููุ ููุณุชูุจู ุงูุงุณุชุฒุฑุงุน ูู ุงูููุงุทู ุงูุตุญุฑุงููุฉ.', content: '<h3>ุงูุฃููุงุต ุงูุนุงุฆูุฉ</h3><p>ูุงูุช ููุชุดุฑุฉ ูู ุฑุดูุฏ ูุฏููุงุท ูุชุชููุฒ ุจุฅูุชุงุฌูุฉ ุนุงููุฉ ููู ุชุญุชุงุฌ ุถูุงุจุท ุจูุฆูุฉ.</p><h3>ุงูุงุณุชุฒุฑุงุน ุงูุตุญุฑุงูู</h3><p>ูุณุชูุจู ูุตุฑ ูู ุงูุงุณุชุฒุฑุงุน ุงูููุซู ุจุงูููุงู ุงูุฌูููุฉ ูุน ุฃูุธูุฉ ุชุฏููุฑ ุงูููุงู RAS.</p>' },
        { title: 'ุชุฑุจูุฉ ุงููุฑุงููุท: ุฏููู ุดุงูู', category: 'ุฃููุงุน ุงูุฃุณูุงู', icon: '๐ฑ', date: '2024-07-01', summary: 'ุงููุฑููุท ูู ุงูุฃุณูุงู ุงููููุฉ ุงูุชู ุชุชุญูู ุงูุธุฑูู ุงูุตุนุจุฉ. ุชุนุฑู ุนูู ุทุฑู ุชุฑุจูุชู.', content: '<h3>ูููุฒุงุช ุงููุฑููุท</h3><p>ูุชุญูู ููุต ุงูุฃูุณุฌูู ูุฌูุฏุฉ ุงูููุงู ุงูุณูุฆุฉุ ููููู ุณุฑูุนุงู.</p><h3>ุงูุชุบุฐูุฉ</h3><p>ูููู ุชุบุฐูุชู ุจูุฎููุงุช ุงููุทุงุจุฎ ูุงูุฃุนูุงู ุงูุฑุฎูุตุฉ.</p><h3>ุงูุชุณููู</h3><p>ูู ุณูู ุฌูุฏ ูู ุงูุฃุฑูุงู ุงููุตุฑูุฉ.</p>' },
        { title: 'ุญุณุงุจ ุชูุงููู ุฏูุฑุฉ ุงูุจูุทู', category: 'ุงูุชุตุงุฏูุงุช', icon: '๐ฐ', date: '2024-07-15', summary: 'ููู ุชุญุณุจ ุชูุงููู ุงูุฏูุฑุฉ ูู ุงูุฒุฑูุนุฉ ููุญุตุงุฏ ูุชุญุฏุฏ ูุงูุด ุงูุฑุจุญุ', content: '<h3>ุนูุงุตุฑ ุงูุชูููุฉ</h3><ul><li>ุงูุฒุฑูุนุฉ: 10-15% ูู ุงูุชูููุฉ</li><li>ุงูุนูู: 60-70% ูู ุงูุชูููุฉ</li><li>ุงูุนูุงูุฉ ูุงูุทุงูุฉ: 15-20%</li></ul><h3>ุญุณุงุจ ุงูุฑุจุญ</h3><p>ุงุญุณุจ ุฅุฌูุงูู ุงูุฅูุชุงุฌ ร ุณุนุฑ ุงูุจูุน - ุฅุฌูุงูู ุงูุชูุงููู = ุตุงูู ุงูุฑุจุญ.</p>' },
        { title: 'ุฃูููุฉ ุงูุชูููุฉ ุงูููููุฉ', category: 'ุฅุฏุงุฑุฉ ุงููุฒุฑุนุฉ', icon: '๐จ', date: '2024-08-01', summary: 'ููุงุฐุง ููุฎูุถ ุงูุฃูุณุฌูู ูููุงูุ ูููู ุชุถุจุท ุฌุฏูู ุชุดุบูู ุงูุจุฏุงูุงุชุ', content: '<h3>ููุงุฐุง ููุฎูุถ ุงูุฃูุณุฌูู ูููุงูุ</h3><p>ุงูุทุญุงูุจ ุชุณุชููู ุงูุฃูุณุฌูู ูู ุงูุชููุณ ุจุฏู ุฅูุชุงุฌู ุนุจุฑ ุงูุจูุงุก ุงูุถูุฆู.</p><h3>ุงูุญู</h3><p>ุดุบูู ุงูุจุฏุงูุงุช ูู ุงูุณุงุนุฉ 2 ูุฌุฑุงู ุญุชู ุงูุดุฑููุ ูุฒุฏ ููุช ุงูุชุดุบูู ูู ุงูุตูู.</p>' },
        { title: 'ุงุฎุชูุงุฑ ูููุน ุงููุฒุฑุนุฉ ุงูุณูููุฉ', category: 'ุงูุชุฎุทูุท', icon: '๐', date: '2024-08-15', summary: 'ูุตุงุฆุญ ูุงุฎุชูุงุฑ ุงููููุน ุงููุซุงูู ููุฒุฑุนุชู ูู ุญูุซ ูุตุฏุฑ ุงูููุงู ูุงูุชุฑุจุฉ.', content: '<h3>ูุนุงููุฑ ุงูุงุฎุชูุงุฑ</h3><ul><li>ูุฑุจ ูุตุฏุฑ ููุงู ูุธูู ููุณุชูุฑ</li><li>ุชุฑุจุฉ ุทูููุฉ ุชุญุชูุธ ุจุงููุงุก</li><li>ุจุนูุฏุงู ุนู ูุตุงุฏุฑ ุงูุชููุซ</li><li>ุณูููุฉ ุงููุตูู ููุฃุณูุงู</li></ul>' },
        { title: 'ุชุฑุจูุฉ ุงููุจุฑูู ูู ูุตุฑ', category: 'ุฃููุงุน ุงูุฃุณูุงู', icon: '๐', date: '2024-09-01', summary: 'ุงููุจุฑูู ุณููุฉ ุงูุชุตุงุฏูุฉ ุชูุงุณุจ ุงููุฒุงุฑุน ุงูุตุบูุฑุฉ. ุชุนุฑู ุนูู ูุชุทูุจุงุชูุง.', content: '<h3>ุฃููุงุน ุงููุจุฑูู</h3><p>ุงููุจุฑูู ุงููุถู ูุงูุนุงุฏู ูู ุงูุฃุณูุงู ุงูุนุงุดุจุฉ ุงูุชู ุชุชุบุฐู ุนูู ุงูุทุญุงูุจ.</p><h3>ุงูููุฒุฉ</h3><p>ุชูุธู ุงูุญูุถ ูู ุงูุทุญุงูุจ ุงูุฒุงุฆุฏุฉ ูุชููู ุชูููุฉ ุงูุนูู.</p>' },
        { title: 'ุงูุญุตุงุฏ ูุงูุชุณููู ุงููุงุฌุญ', category: 'ุงูุชุณููู', icon: '๐', date: '2024-09-15', summary: 'ูุชู ุชุญุตุฏุ ูููู ุชุญุงูุธ ุนูู ุฌูุฏุฉ ุงูุณูู ุญุชู ูุตููู ููุณููุ', content: '<h3>ุชูููุช ุงูุญุตุงุฏ</h3><p>ุนูุฏูุง ูุตู ุงูุจูุทู ูู 250-300 ุฌุฑุงู (5-6 ุฃุดูุฑ ุนุงุฏุฉ).</p><h3>ูุตุงุฆุญ ุงูุชุณููู</h3><ul><li>ุงุญุตุฏ ูู ุงูุตุจุงุญ ุงูุจุงูุฑ</li><li>ุงุณุชุฎุฏู ุงูุซูุฌ ููุญูุงุธ ุนูู ุงูุทุฑุงูุฉ</li><li>ุชูุงุตู ูุน ุงูุชุฌุงุฑ ูุณุจูุงู</li></ul>' },
        { title: 'ุฅูุดุงุก ููุฑุฎ ุจูุทู ุตุบูุฑ', category: 'ูุดุงุฑูุน', icon: '๐ญ', date: '2024-10-01', summary: 'ุฎุทูุงุช ุฅูุดุงุก ููุฑุฎ ุจูุทู ููุฒูู ูุฅูุชุงุฌ ุงูุฒุฑูุนุฉ ูุชุญููู ุฏุฎู ุฅุถุงูู.', content: '<h3>ุงููุชุทูุจุงุช</h3><ul><li>ุฃุญูุงุถ ุตุบูุฑุฉ 4ร4 ูุชุฑ</li><li>ุฃููุงุช ูุขุจุงุก ุนุงููุฉ ุงูุฌูุฏุฉ</li><li>ูุธุงู ุชุฏูุฆุฉ ููุดุชุงุก</li></ul><h3>ุงูุฅูุชุงุฌ</h3><p>ุงูุฃูุซู ุงููุงุญุฏุฉ ุชูุชุฌ 500-2000 ุฒุฑูุนุฉ ูู 3-4 ุฃุณุงุจูุน.</p>' },
        { title: 'ุชุบุฐูุฉ ุงูุฃุณูุงู ุจุงูุฃุนูุงู ุงููุญููุฉ', category: 'ุงูุชุบุฐูุฉ', icon: '๐ฝ', date: '2024-10-15', summary: 'ููู ุชุตูุน ุนููุงู ููุฒููุงู ูู ููููุงุช ูุญููุฉ ูุชูููู ุงูุชูุงูููุ', content: '<h3>ููููุงุช ุงูุนูู ุงููุญูู</h3><ul><li>ูุณุจ ุงููุทู ุฃู ุงูุตููุง</li><li>ุงูุฐุฑุฉ ุฃู ุงูููุญ ุงููุทุญูู</li><li>ูุณุญูู ุงูุณูู</li><li>ููุชุงูููุงุช ููุนุงุฏู</li></ul><h3>ุงูุชุญุฐูุฑ</h3><p>ุชุฃูุฏ ูู ุฌูุฏุฉ ุงูุฎูุท ูุงูุชุฎุฒูู ุงูุฌูุฏ.</p>' },
        { title: 'ุงูุจูููููู: ุชูููุฉ ุงููุณุชูุจู', category: 'ุทุฑู ุญุฏูุซุฉ', icon: '๐ฌ', date: '2024-11-01', summary: 'ูุง ูู ูุธุงู ุงูุจููููููุ ูููู ูููุฑ 30% ูู ุชูููุฉ ุงูุนููุ', content: '<h3>ูุง ูู ุงูุจููููููุ</h3><p>ุชูููุฉ ุชุญูู ูุถูุงุช ุงูุฃุณูุงู ูุจูุชูุฑูุง ูุงูุนุฉ ุชุฃูููุง ุงูุฃุณูุงู ูุบุฐุงุก ุฅุถุงูู.</p><h3>ุงูููุงุฆุฏ</h3><ul><li>ุชูููุฑ 30% ูู ุงูุนูู</li><li>ุชุญุณูู ุฌูุฏุฉ ุงูููุงู</li><li>ุฅูุชุงุฌูุฉ ุฃุนูู</li></ul>' },
        { title: 'ูุดุงูู ุงูุทุญุงูุจ ุงูุฎุถุฑุงุก ูุงูุฒุฑูุงุก', category: 'ุฌูุฏุฉ ุงูููุงู', icon: '๐ฟ', date: '2024-11-15', summary: 'ูุชู ุชููู ุงูุทุญุงูุจ ูููุฏุฉ ููุชู ุชุตุจุญ ุฎุทูุฑุฉุ ูููู ุชุชุนุงูู ูุนูุงุ', content: '<h3>ุงูุทุญุงูุจ ุงููููุฏุฉ</h3><p>ุงูุทุญุงูุจ ุงูุฎุถุฑุงุก ุชูุชุฌ ุงูุฃูุณุฌูู ูุชุบุฐู ุจุนุถ ุงูุฃุณูุงู.</p><h3>ุงูุทุญุงูุจ ุงูุถุงุฑุฉ</h3><p>ุงูุทุญุงูุจ ุงูุฒุฑูุงุก (ุงูุณูุงูู) ูุฏ ุชูุฑุฒ ุณูููุงู. ุนุงูุฌูุง ุจุชุบููุฑ ุงูููุงู ูุชูููู ุงูุชุณููุฏ.</p>' },
        { title: 'ุชุฑุจูุฉ ุงูุฌูุจุฑู ูู ูุตุฑ', category: 'ุฃููุงุน ุงูุฃุณูุงู', icon: '๐ฆ', date: '2024-12-01', summary: 'ูุฑุตุฉ ุงุณุชุซูุงุฑูุฉ ูุงุนุฏุฉ: ุชุฑุจูุฉ ุงูุฌูุจุฑู ูู ุงูููุงุทู ุงูุณุงุญููุฉ.', content: '<h3>ูุชุทูุจุงุช ุงูุฌูุจุฑู</h3><ul><li>ููุงู ูุงูุญุฉ ุฃู ุดุจู ูุงูุญุฉ</li><li>ุฏุฑุฌุฉ ุญุฑุงุฑุฉ 25-30 ุฏุฑุฌุฉ</li><li>ุฃุญูุงุถ ุถุญูุฉ 1-1.5 ูุชุฑ</li></ul><h3>ุงูุนุงุฆุฏ</h3><p>ุณุนุฑ ุงูุฌูุจุฑู ุฃุนูู ุจูุซูุฑ ูู ุงูุจูุทูุ ููู ุงููุฎุงุทุฑ ุฃุนูู.</p>' },
        { title: 'ุฅุฏุงุฑุฉ ุงูุฃุฒูุงุช ูู ุงููุฒุฑุนุฉ', category: 'ุฅุฏุงุฑุฉ ุงููุฒุฑุนุฉ', icon: '๐จ', date: '2024-12-15', summary: 'ููู ุชุชุตุฑู ุนูุฏ ูููู ููุงุฌุฆ ุฃู ุงููุทุงุน ุงูููุฑุจุงุก ุฃู ุชููุซ ุงูููุงูุ', content: '<h3>ุฎุทุฉ ุงูุทูุงุฑุฆ</h3><ul><li>ุงุญุชูุธ ุจูููุฏ ููุฑุจุงุฆู ุงุญุชูุงุทู</li><li>ุฑุงูุจ ุงูุฃุณูุงู ููููุงู</li><li>ุงุญุชูุธ ุจุฃุฏููุฉ ุฃุณุงุณูุฉ</li><li>ุณุฌู ูู ุงูููุงุญุธุงุช</li></ul>' },
        { title: 'ุงูุงุณุชุฒุฑุงุน ุงูุนุถูู ููุฃุณูุงู', category: 'ุทุฑู ุญุฏูุซุฉ', icon: '๐ฑ', date: '2025-01-01', summary: 'ููู ุชูุชุฌ ุฃุณูุงูุงู ุนุถููุฉ ุจุณุนุฑ ุฃุนูู ููุฃุณูุงู ุงููุชุฎุตุตุฉุ', content: '<h3>ูุชุทูุจุงุช ุงูุนุถูู</h3><ul><li>ุฃุนูุงู ุทุจูุนูุฉ ุจุฏูู ูููุงููุงุช</li><li>ููุงู ูุธููุฉ ุฎุงููุฉ ูู ุงููููุซุงุช</li><li>ุนุฏู ุงุณุชุฎุฏุงู ูุถุงุฏุงุช ุญูููุฉ</li></ul><h3>ุงูุชุณููู</h3><p>ุงุณุชูุฏู ุงูููุงุฏู ูุงููุทุงุนู ุงูุฑุงููุฉ.</p>' },
        { title: 'ุฏูุฑ ุงููุฑุฃุฉ ูู ุงูุงุณุชุฒุฑุงุน ุงูุณููู', category: 'ูุตุต ูุฌุงุญ', icon: '๐ฉโ๐พ', date: '2025-01-07', summary: 'ูุตุต ูุฌุงุญ ูุณูุฏุงุช ูุตุฑูุงุช ุฃุณุณู ูุฒุงุฑุน ุณูููุฉ ูุงุฌุญุฉ.', content: '<h3>ูุฑุต ูููุฑุฃุฉ</h3><p>ุงูุงุณุชุฒุฑุงุน ุงูุณููู ูุฌุงู ููุงุณุจ ูููุฑุฃุฉ ุงูุฑูููุฉ ุฎุงุตุฉ ูู ุงูููุฑุฎุงุช ูุงูุชุบุฐูุฉ.</p><h3>ูุตุฉ ูุฌุงุญ</h3><p>ุงูุญุงุฌุฉ ูุงุทูุฉ ูู ููุฑ ุงูุดูุฎ ุจุฏุฃุช ุจุญูุถ ูุงุญุฏ ูุงูุขู ุชููู 10 ุฃุญูุงุถ.</p>' }
    ];

    const insertArticle = db.prepare(`
        INSERT INTO articles (title, category, icon, date, summary, content) 
        VALUES (?, ?, ?, ?, ?, ?)
    `);

    allArticles.forEach(article => {
        insertArticle.run(
            article.title,
            article.category,
            article.icon,
            article.date,
            article.summary,
            article.content
        );
    });
    // ... (Articles insertion code) ...
    insertArticle.finalize();
    console.log(`โ ${allArticles.length} articles inserted successfully`);

    // Insert Default Questions
    const defaultQuestions = [
        {
            number: 1,
            text: 'ูุง ูู ููุน ุงููุฒุฑุนุฉ ุงูุณูููุฉ ุงูุฎุงุตุฉ ุจูุ',
            type: 'radio',
            options: [
                { value: 'ุฃุญูุงุถ ุชุฑุงุจูุฉ', label: 'ุฃุญูุงุถ ุชุฑุงุจูุฉ', icon: '๐' },
                { value: 'ุฃุญูุงุถ ุฎุฑุณุงููุฉ', label: 'ุฃุญูุงุถ ุฎุฑุณุงููุฉ', icon: '๐งฑ' },
                { value: 'ุฃููุงุต ุนุงุฆูุฉ', label: 'ุฃููุงุต ุนุงุฆูุฉ', icon: 'โ' },
                { value: 'ูุธุงู ุชุฏููุฑ ุงูููุงู (RAS)', label: 'ูุธุงู RAS', icon: '๐' },
                { value: 'ุฃุญูุงุถ ุจูุงุณุชูููุฉ/ููุจุฑุฌูุงุณ', label: 'ุฃุญูุงุถ ุจูุงุณุชูู', icon: '๐' },
                { value: 'ุฃุฎุฑู', label: 'ุฃุฎุฑู', icon: 'โ' }
            ]
        },
        {
            number: 2,
            text: 'ูุง ูู ููุน ุงูุฃุณูุงู ุงููุณุชุฒุฑุนุฉุ',
            type: 'radio',
            options: [
                { value: 'ุจูุทู (Tilapia)', label: 'ุจูุทู', icon: '๐' },
                { value: 'ุจูุฑู (Mullet)', label: 'ุจูุฑู', icon: '๐' },
                { value: 'ูุงุฑูุต (Sea Bass)', label: 'ูุงุฑูุต', icon: '๐ฆ' },
                { value: 'ุฏููุณ (Sea Bream)', label: 'ุฏููุณ', icon: '๐ก' },
                { value: 'ุฌูุจุฑู (Shrimp)', label: 'ุฌูุจุฑู', icon: '๐ฆ' },
                { value: 'ูุจุฑูู (Carp)', label: 'ูุจุฑูู', icon: '๐' }
            ]
        },
        {
            number: 3,
            text: 'ูุง ูู ุญุฌู ูุฒุฑุนุชูุ',
            type: 'radio',
            options: [
                { value: 'ุตุบูุฑุฉ (ุฃูู ูู 1 ูุฏุงู)', label: 'ุตุบูุฑุฉ (ุฃูู ูู 1 ูุฏุงู)', icon: '๐ฑ' },
                { value: 'ูุชูุณุทุฉ (1 - 5 ูุฏุงู)', label: 'ูุชูุณุทุฉ (1 - 5 ูุฏุงู)', icon: '๐ฟ' },
                { value: 'ูุจูุฑุฉ (ุฃูุซุฑ ูู 5 ูุฏุงู)', label: 'ูุจูุฑุฉ (ุฃูุซุฑ ูู 5 ูุฏุงู)', icon: '๐ญ' }
            ]
        },
        {
            number: 4,
            text: 'ูุง ูู ุงูุชุญุฏู ุฃู ุงูุณุคุงู ุงูุฑุฆูุณู ูุฏููุ',
            type: 'radio',
            options: [
                { value: 'ูุดุงูู ูู ุฌูุฏุฉ ุงูููุงู', label: 'ูุดุงูู ูู ุฌูุฏุฉ ุงูููุงู', icon: '๐ง' },
                { value: 'ุฃูุฑุงุถ ุชุตูุจ ุงูุฃุณูุงู', label: 'ุฃูุฑุงุถ ุชุตูุจ ุงูุฃุณูุงู', icon: '๐ฅ' },
                { value: 'ุงูุฎูุงุถ ูุนุฏู ุงูููู', label: 'ุงูุฎูุงุถ ูุนุฏู ุงูููู', icon: '๐' },
                { value: 'ูุดุงูู ูู ุงูุชุบุฐูุฉ', label: 'ูุดุงูู ูู ุงูุชุบุฐูุฉ', icon: '๐ฝ๏ธ' },
                { value: 'ูููู ููุงุฌุฆ ููุฃุณูุงู', label: 'ูููู ููุงุฌุฆ ููุฃุณูุงู', icon: 'โ๏ธ' },
                { value: 'ุชุญุณูู ุงูุฅูุชุงุฌูุฉ ูุงูุฑุจุญูุฉ', label: 'ุชุญุณูู ุงูุฅูุชุงุฌูุฉ ูุงูุฑุจุญูุฉ', icon: '๐ฐ' },
                { value: 'ุจุฏุก ูุดุฑูุน ุฌุฏูุฏ', label: 'ุจุฏุก ูุดุฑูุน ุฌุฏูุฏ', icon: '๐' }
            ]
        },
        {
            number: 5,
            text: 'ูู ูุฏูู ุชูุงุตูู ุฅุถุงููุฉ ุชูุฏ ูุดุงุฑูุชูุงุ',
            type: 'textarea',
            options: []
        }
    ];

    db.serialize(() => {
        const insertQuestion = db.prepare('INSERT INTO questions (question_number, question_text, question_type) VALUES (?, ?, ?)');
        const insertOption = db.prepare('INSERT INTO question_options (question_id, option_value, option_label, option_icon) VALUES (?, ?, ?, ?)');

        defaultQuestions.forEach(q => {
            // We need the ID of the inserted question to insert options
            // But sqlite in nodejs allows retrieving lastID in the callback.
            // Since we are adding logic inside a loop, it's safer to use run with callback.
            insertQuestion.run(q.number, q.text, q.type, function (err) {
                if (err) {
                    console.error('Error inserting question:', err);
                    return;
                }
                const questionId = this.lastID;
                if (q.options && q.options.length > 0) {
                    q.options.forEach(opt => {
                        insertOption.run(questionId, opt.value, opt.label, opt.icon);
                    });
                }
            });
        });

        // Wait a bit for async inserts inside loop (not perfect but good for init script)
        // Or better: finalize after some time, or assume it works since it's serialized.
        // The proper way in serialize is tricky with inner callbacks.
        // Actually, db.serialize guarantees order of execution.
        // But the inner db.run callbacks are async.
        // Given this is a one-off init script, we'll keep it simple.
    });
    console.log('โ Default questions and options inserted');
});

db.close((err) => {
    if (err) {
        console.error('Error closing database:', err);
    } else {
        console.log('โ Database initialized successfully!');
        console.log('๐ Database file: database.sqlite');
    }
});
